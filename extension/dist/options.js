import"./modulepreload-polyfill.js";import{r as c,j as e,c as $}from"./vendor-react.js";import"./vendor.js";const P="_title_17bz9_33",I="_save_17bz9_44",z="_models_17bz9_20",R="_planner_17bz9_128",h={"models-container":"_models-container_17bz9_20","models-settings-container":"_models-settings-container_17bz9_21",title:P,"model-card":"_model-card_17bz9_40",save:I,delete:"_delete_17bz9_45","models-item":"_models-item_17bz9_71","api-key-details":"_api-key-details_17bz9_72",models:z,"models-list":"_models-list_17bz9_89","not-configured":"_not-configured_17bz9_115",planner:R,"model-settings-item":"_model-settings-item_17bz9_147","model-settings":"_model-settings_17bz9_29","model-settings-wrapper":"_model-settings-wrapper_17bz9_162"},L=[{name:"Gemini",models:["gemini-2.5-pro","gemini-2.5-flash","gemini-2.5-flash-lite","gemini-live-2.5-flash-preview","gemini-2.5-flash-preview-native-audio-dialog","gemini-2.5-flash-preview-tts","gemini-2.5-pro-preview-tts","gemini-2.0-flash","gemini-2.0-flash-lite","gemini-2.0-flash-live-001"]}],D="_tag_qu8sx_1",j={"tags-field":"_tags-field_qu8sx_1","tags-input":"_tags-input_qu8sx_5",tag:D,"tag-remove":"_tag-remove_qu8sx_29","tag-input":"_tag-input_qu8sx_41","tags-help":"_tags-help_qu8sx_52"};function O({value:n,onChange:i}){const[o,l]=c.useState(""),u=c.useRef(null),f=c.useMemo(()=>new Set(n.map(t=>t.toLowerCase())),[n]),r=t=>t.split(/[\s,]+/g).map(m=>m.trim()).filter(Boolean),a=c.useCallback(t=>{const m=t.trim();m&&(f.has(m.toLowerCase())||i([...n,m]))},[f,i,n]),p=c.useCallback(()=>{if(!o.trim())return;const t=r(o).filter(m=>!f.has(m.toLowerCase()));t.length&&i([...n,...t]),l("")},[o,f,i,n]),x=t=>i(n.filter((m,s)=>s!==t)),g=t=>{(t.key==="Enter"||t.key===" ")&&o.trim()?(t.preventDefault(),p()):t.key==="Backspace"&&o.length===0&&n.length>0&&(t.preventDefault(),x(n.length-1))},d=t=>{const m=t.clipboardData.getData("text");m&&(t.preventDefault(),r(m).forEach(a))};return e.jsxs("div",{className:j["tags-field"],children:[e.jsxs("div",{className:j["tags-input"],role:"list",children:[n.map((t,m)=>e.jsxs("span",{className:j.tag,role:"listitem",children:[e.jsx("span",{className:j["tag-label"],children:t}),e.jsx("button",{type:"button",className:j["tag-remove"],"aria-label":`Remove ${t}`,onClick:()=>x(m),children:"×"})]},`${t}-${m}`)),e.jsx("input",{ref:u,type:"text",value:o,onChange:t=>l(t.target.value),onKeyDown:g,onPaste:d,className:j["tag-input"],"aria-label":"Add model"})]}),e.jsx("p",{className:j["tags-help"],children:"Type and press Enter or Space to add."})]})}const T="_container_ba3p6_1",q="_button_ba3p6_6",A="_icon_ba3p6_26",K="_text_ba3p6_31",F="_dropdown_ba3p6_35",H="_dropdownItem_ba3p6_48",G="_noOptions_ba3p6_70",v={container:T,button:q,icon:A,text:K,dropdown:F,dropdownItem:H,noOptions:G};function W({options:n,onSelect:i}){const[o,l]=c.useState(!1),u=c.useRef(null);function f(){l(a=>!a)}function r(a){l(!1),i(a)}return c.useEffect(()=>{function a(p){u.current&&p.target&&!u.current.contains(p.target)&&l(!1)}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),e.jsxs("div",{className:v.container,ref:u,children:[e.jsxs("button",{className:v.button,onClick:f,children:[e.jsx("span",{className:v.icon,children:"+"}),e.jsx("span",{className:v.text,children:"Add New Provider"})]}),o&&e.jsx("div",{className:v.dropdown,children:n.length===0?e.jsx("div",{className:v.noOptions,children:"No more providers to choose from."}):n.map(a=>e.jsx("button",{className:v.dropdownItem,onClick:()=>r(a),children:a.name},a.name))})]})}const V="_container_1tnlf_1",J="_button_1tnlf_5",Q="_caret_1tnlf_25",U="_dropdown_1tnlf_30",X="_dropdownBottom_1tnlf_45",Y="_dropdownTop_1tnlf_48",Z="_dropdownItem_1tnlf_52",b={container:V,button:J,caret:Q,dropdown:U,dropdownBottom:X,dropdownTop:Y,dropdownItem:Z};function ee({options:n}){const[i,o]=c.useState("Choose model"),[l,u]=c.useState(!1),[f,r]=c.useState("bottom"),a=c.useRef(null),p=c.useRef(null);c.useEffect(()=>{chrome.storage.local.get(["baseModel"],d=>{d.baseModel&&o(d.baseModel)})},[]);function x(){u(d=>!d)}function g(d){o(d),u(t=>!t),chrome.storage.local.set({baseModel:d})}return c.useEffect(()=>{function d(t){a.current&&t.target&&!a.current.contains(t.target)&&u(!1)}return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),c.useEffect(()=>{new Set(["Choose model",...n.flatMap(t=>t.models.map(m=>`${t.name} > ${m}`))]).has(i)||o("Choose model")},[n,i]),c.useEffect(()=>{function d(t,m){if(m!=="local"||!t.baseModel)return;const s=t.baseModel.newValue;o(s??"Choose model")}return chrome.storage.onChanged.addListener(d),()=>chrome.storage.onChanged.removeListener(d)},[]),c.useLayoutEffect(()=>{if(!l||!a.current)return;const d=a.current.getBoundingClientRect(),t=p.current?.scrollHeight??0,m=window.innerHeight-d.bottom,s=d.top;m<t&&s>m?r("top"):r("bottom")},[l]),e.jsxs("div",{className:b.container,ref:a,children:[e.jsxs("button",{className:b.button,onClick:x,children:[e.jsx("span",{children:i}),e.jsx("span",{className:b.caret,children:l?"▲":"▼"})]}),l&&e.jsxs("div",{ref:p,className:`${b.dropdown} ${f==="top"?b.dropdownTop:b.dropdownBottom}`,children:[e.jsx("button",{className:b.dropdownItem,onClick:()=>g("Choose model"),children:"Choose model"}),n.flatMap(d=>d.models.map(t=>e.jsxs("button",{className:b.dropdownItem,onClick:()=>g(`${d.name} > ${t}`),children:[d.name," ",">"," ",t]},`${d.name}-${t}`)))]})]})}const te="_root_1kqce_1",se="_range_1kqce_8",ne="_number_1kqce_13",C={root:te,range:se,number:ne};function E({Max:n,storageKey:i,defaultValue:o=0}){const[l,u]=c.useState(o);c.useEffect(()=>{chrome.storage.local.get([i],r=>{typeof r[i]=="number"&&u(r[i])})},[i]);const f=r=>{const a=Number(r.target.value);u(a),chrome.storage.local.set({[i]:a})};return e.jsxs("div",{className:C.root,children:[e.jsx("input",{type:"range",min:"0",max:n,step:"0.01",value:l,onChange:f,className:C.range}),e.jsx("input",{type:"number",min:"0",max:n,step:"0.01",value:l,onChange:f,className:C.number})]})}const S=L;function oe(){const[n,i]=c.useState([]),[o,l]=c.useState(()=>Object.fromEntries(S.map(s=>[s.name,s.models??[]]))),[u,f]=c.useState({}),[r,a]=c.useState([]);c.useEffect(()=>{chrome.storage.local.get(["selected","modelsByProvider","apiKeys"],s=>{s.selected&&(i(s.selected),a(s.selected)),s.modelsByProvider&&l(s.modelsByProvider),s.apiKeys&&f(s.apiKeys)})},[]);function p(s,_,k){const y={...o,[s]:_},M={...u,[s]:k};l(y),f(M),chrome.storage.local.set({selected:n,modelsByProvider:y,apiKeys:M}),a(w=>w.includes(s)?w:[...w,s])}function x(s){i(_=>_.includes(s.name)?_:[..._,s.name]),l(_=>({..._,[s.name]:_[s.name]??s.models??[]}))}function g(s){const _=n.filter(N=>N!==s),{[s]:k,...y}=o,{[s]:M,...w}=u;i(_),l(y),f(w),a(N=>N.filter(B=>B!==s)),chrome.storage.local.set({selected:_,modelsByProvider:y,apiKeys:w}),chrome.storage.local.get(["baseModel"],N=>{N.baseModel&&N.baseModel.startsWith(s)&&chrome.storage.local.remove("baseModel")})}const d=S.filter(s=>!n.includes(s.name)),t=n.map(s=>S.find(_=>_.name===s)).filter(Boolean),m=t.length>0?e.jsx(le,{items:t,onRemove:g,modelsByProvider:o,setModelsByProvider:l,handleSave:p,apiKeys:u}):e.jsx("div",{className:h["not-configured"],children:"No providers configured yet. Add a provider to get started."});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:h["models-container"],children:[e.jsx("h2",{className:h.title,children:"LLM Providers"}),m," ",e.jsx(W,{options:d,onSelect:x})]}),e.jsxs("div",{className:h["models-settings-container"],children:[e.jsx("h2",{className:h.title,children:"Model Selection"}),e.jsx(ce,{modelsByProvider:o,selected:r})]})]})}function ae({LLM:n,onRemove:i,value:o,apiKeyValue:l,onSave:u}){const[f,r]=c.useState(o),[a,p]=c.useState(l);c.useEffect(()=>r(o),[o]),c.useEffect(()=>p(l),[l]);const x=a!==l||f.length!==o.length||f.some((g,d)=>g!==o[d]);return e.jsxs("div",{className:h["model-card"],children:[e.jsxs("div",{className:h["models-item"],children:[e.jsx("h2",{children:n.name}),e.jsxs("div",{children:[e.jsx("button",{className:h.save,disabled:!x,onClick:()=>u(f,a),children:"Save"}),e.jsx("button",{className:h.delete,onClick:()=>{r(o),p(l),i()},children:"Delete"})]})]}),e.jsxs("div",{className:h["api-key-details"],children:[e.jsx("h3",{children:"API Key"}),e.jsx("input",{type:"password",placeholder:`Enter ${n.name} API Key (required)`,value:a,onChange:g=>p(g.target.value)})]}),e.jsxs("div",{className:h.models,children:[e.jsx("h3",{children:"Models"}),e.jsx("div",{className:h["models-list"],children:e.jsx(O,{value:f,onChange:r})})]})]})}function le({items:n,onRemove:i,modelsByProvider:o,setModelsByProvider:l,handleSave:u,apiKeys:f}){return e.jsx("div",{children:n.map(r=>e.jsx(ae,{LLM:r,onRemove:()=>i(r.name),value:o[r.name]??[],apiKeyValue:f?.[r.name]??"",onSave:(a,p)=>u(r.name,a,p)},r.name))})}function ce({modelsByProvider:n,selected:i}){const o=i.map(l=>({...S.find(u=>u.name===l),models:n[l]??[]}));return e.jsx(e.Fragment,{children:e.jsxs("div",{className:h.planner,children:[e.jsx("h3",{children:"Base Model"}),e.jsx("p",{children:"Choose the base model for general tasks."}),e.jsxs("div",{className:h["model-settings"],children:[e.jsxs("div",{className:h["model-settings-item"],children:[e.jsx("label",{children:"Model"}),e.jsx("div",{className:h["model-settings-wrapper"],children:e.jsx(ee,{options:o})})]}),e.jsxs("div",{className:h["model-settings-item"],children:[e.jsx("label",{children:"Temperature"}),e.jsx("div",{className:h["model-settings-wrapper"],children:e.jsx(E,{Max:2,storageKey:"temperature",defaultValue:.1})})]}),e.jsxs("div",{className:h["model-settings-item"],children:[e.jsx("label",{children:"Top P"}),e.jsx("div",{className:h["model-settings-wrapper"],children:e.jsx(E,{Max:1,storageKey:"topP",defaultValue:.1})})]})]})]})})}$.createRoot(document.getElementById("root")).render(e.jsx(e.Fragment,{children:e.jsx(oe,{})}));
